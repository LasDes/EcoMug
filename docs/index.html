<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EcoMug: EcoMug: Efficient COsmic MUon Generator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EcoMug
   &#160;<span id="projectnumber">1.3</span>
   </div>
   <div id="projectbrief">Efficient COsmic MUon Generator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a>: Efficient COsmic MUon Generator </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a> is a header-only C++11 library for the generation of cosmic ray (CR) muons, based on a parametrization of experimental data. Unlike other tools, <a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a> gives the possibility of generating from different surfaces (plane, cylinder and half-sphere), while keeping the correct angular and momentum distribution of generated tracks. <a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a> also allows the generation of CR muons according to user-defined parametrizations of their differential flux.</p>
<p>If you use, or want to refer to, <a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a> please cite the following paper:</p>
<blockquote class="doxtable">
<p>Pagano, D., Bonomi, G., Donzella, A., Zenoni, A., Zumerle, G., &amp; Zurlo, N. (2021). <a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a>: An Efficient COsmic MUon Generator for cosmic-ray muon applications. Nuclear Instruments and Methods in Physics Research Section A: Accelerators, Spectrometers, Detectors and Associated Equipment, 1014, 165732. </p>
</blockquote>
<p>Latest release: <a href="https://github.com/dr4kan/EcoMug/releases/tag/v1.3">EcoMug v1.3</a></p>
<h1><a class="anchor" id="autotoc_md1"></a>
Basic Usage</h1>
<p>The use of the library requires the initialization of the <code><a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a></code> class, the choice of the generation method, and the definition of the size and position of the generation surface. Once the setup of the instance of the <code><a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a></code> class is done, the generation of a cosmic-ray muon can be invoked with the method <code>Generate()</code>, which will compute its position, direction, momentum, and charge. All these quantities can be accessed with the methods <code>GetGenerationPosition()</code>, <code>GetGenerationTheta()</code>, <code>GetGenerationPhi()</code>, <code>GetGenerationMomentum()</code>, and <code>GetCharge()</code>, as shown in the examples below. The charge for generated muons takes into account the excess of positive muons over negative ones, assuming a constant charge ratio (see the above mentioned paper for more details). Angles are in radians, momentum is in GeV/c, whereas the unit of measure of the position is arbitrary and depends on the choice done in the simulation code where <a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a> is used.</p>
<h3><a class="anchor" id="autotoc_md2"></a>
Plane-based generation</h3>
<div class="fragment"><div class="line">EcoMug gen; // initialization of the class</div>
<div class="line">gen.SetUseSky(); // plane surface generation</div>
<div class="line">gen.SetSkySize({{10., 10.}}); // x and y size of the plane</div>
<div class="line">// (x,y,z) position of the center of the plane</div>
<div class="line">gen.SetSkyCenterPosition({{0., 0., 20.}});</div>
<div class="line"> </div>
<div class="line">// The array storing muon generation position</div>
<div class="line">std::array&lt;double, 3&gt; muon_position;</div>
<div class="line"> </div>
<div class="line">for (auto event = 0; event &lt; number_of_events; ++event) {</div>
<div class="line">  gen.Generate();</div>
<div class="line">  muon_position = gen.GetGenerationPosition();</div>
<div class="line">  double muon_p = gen.GetGenerationMomentum();</div>
<div class="line">  double muon_theta = gen.GetGenerationTheta();</div>
<div class="line">  double muon_phi = gen.GetGenerationPhi();</div>
<div class="line">  double muon_charge = gen.GetCharge();</div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3"></a>
Cylinder-based generation</h3>
<div class="fragment"><div class="line">EcoMug gen; // initialization of the class</div>
<div class="line">gen.SetUseCylinder(); // cylindrical surface generation</div>
<div class="line">gen.SetCylinderRadius(10.); // cylinder radius</div>
<div class="line">gen.SetCylinderHeight(30.); // cylinder height</div>
<div class="line">// (x,y,z) position of the center of the cylinder</div>
<div class="line">gen.SetCylinderCenterPosition({{0., 0., 15.}});</div>
<div class="line"> </div>
<div class="line">// The array storing muon generation position</div>
<div class="line">std::array&lt;double, 3&gt; muon_position;</div>
<div class="line"> </div>
<div class="line">for (auto event = 0; event &lt; number_of_events; ++event) {</div>
<div class="line">  gen.Generate();</div>
<div class="line">  muon_position = gen.GetGenerationPosition();</div>
<div class="line">  double muon_p = gen.GetGenerationMomentum();</div>
<div class="line">  double muon_theta = gen.GetGenerationTheta();</div>
<div class="line">  double muon_phi = gen.GetGenerationPhi();</div>
<div class="line">  double muon_charge = gen.GetCharge();</div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md4"></a>
Hsphere-based generation</h3>
<div class="fragment"><div class="line">EcoMug gen; // initialization of the class</div>
<div class="line">gen.SetUseHSphere(); // half-spherical surface generation</div>
<div class="line">gen.SetHSphereRadius(30.); // half-sphere radius</div>
<div class="line">// (x,y,z) position of the center of the half-sphere</div>
<div class="line">gen.SetHSphereCenterPosition({{0., 0., 0.}});</div>
<div class="line"> </div>
<div class="line">// The array storing muon generation position</div>
<div class="line">std::array&lt;double, 3&gt; muon_position;</div>
<div class="line"> </div>
<div class="line">for (auto event = 0; event &lt; number_of_events; ++event) {</div>
<div class="line">  gen.Generate();</div>
<div class="line">  muon_position = gen.GetGenerationPosition();</div>
<div class="line">  double muon_p = gen.GetGenerationMomentum();</div>
<div class="line">  double muon_theta = gen.GetGenerationTheta();</div>
<div class="line">  double muon_phi = gen.GetGenerationPhi();</div>
<div class="line">  double muon_charge = gen.GetCharge();</div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5"></a>
More Advanced Usage</h1>
<p>It is possible to set the seed in <a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a>, for reproducible generations. This can be done with the method <code>SetSeed</code>, as shown in the example below. If the seed is set to 0 (or the method is not invoked at all), a random seed is used.</p>
<div class="fragment"><div class="line">EcoMug gen;</div>
<div class="line">gen.SetUseSky();</div>
<div class="line">gen.SetSkySize({{10., 10.}});</div>
<div class="line">gen.SetSkyCenterPosition({{0., 0., 20.}});</div>
<div class="line"> </div>
<div class="line">// set the seed (only positive integers are accepted)</div>
<div class="line">gen.SetSeed(1234);</div>
</div><!-- fragment --><p>In several scenarios, one could be interested in generating tracks from a subset of these parameters, saving space and computation time. <a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a> allows this by exposing to the user the following methods:</p>
<ul>
<li><code>SetMinimumMomentum</code> - Set the minimum momentum for generated cosmic-ray muons;</li>
<li><code>SetMaximumMomentum</code> - Set the maximum momentum for generated cosmic-ray muons;</li>
<li><code>SetMinimumTheta</code> - Set the minimum zenith angle 𝜃 for generated cosmic-ray muons;</li>
<li><code>SetMaximumTheta</code> - Set the maximum zenith angle 𝜃 for generated cosmic-ray muons;</li>
<li><code>SetMinimumPhi</code> - Set the minimum azimuthal angle 𝜙 for generated cosmic-ray muons;</li>
<li><code>SetMaximumPhi</code> - Set the maximum azimuthal angle 𝜙 for generated cosmic-ray muons.</li>
</ul>
<div class="fragment"><div class="line">#include &lt;math.h&gt; // necessary for the M_PI constant</div>
<div class="line"> </div>
<div class="line">EcoMug gen;</div>
<div class="line">gen.SetUseSky();</div>
<div class="line">gen.SetSkySize({{10., 10.}});</div>
<div class="line">gen.SetSkyCenterPosition({{0., 0., 20.}});</div>
<div class="line"> </div>
<div class="line">gen.SetMinimumMomentum(80.);</div>
<div class="line">gen.SetMaximumMomentum(800.);</div>
<div class="line">gen.SetMinimumTheta(0.);</div>
<div class="line">gen.SetMaximumTheta(M_PI/4);</div>
<div class="line">gen.SetMinimumPhi(0.);</div>
<div class="line">gen.SetMaximumPhi(M_PI);</div>
</div><!-- fragment --><p>In those cases where the proposed parametrization of the differential flux <em>J</em> of CR muons does not fit the user needs, <a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a> gives the possibility to use a custom function for <em>J</em>, as shown in the example below.</p>
<div class="fragment"><div class="line">double J(double p, double theta) {</div>
<div class="line">  double A = 0.14*pow(p, -2.7);</div>
<div class="line">  double B = 1. / (1. + 1.1*p*cos(theta)/115.);</div>
<div class="line">  double C = 0.054 / (1. + 1.1*p*cos(theta)/850.);</div>
<div class="line">  return A*(B+C);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">EcoMug gen;</div>
<div class="line">gen.SetUseSky();</div>
<div class="line">gen.SetSkySize({{x, y}});</div>
<div class="line">gen.SetSkyCenterPosition({0., 0., z});</div>
<div class="line">gen.SetMinimumMomentum(150);</div>
<div class="line">gen.SetDifferentialFlux(&amp;J);</div>
<div class="line"> </div>
<div class="line">for (auto event = 0; event &lt; nevents; ++event) {</div>
<div class="line">  gen.GenerateFromCustomJ(); // generate from user-defined J</div>
<div class="line">  ... // retrieve and use muon data</div>
<div class="line">  gen.Generate(); // generate from J as in equation 2</div>
<div class="line">  ... // retrieve and use muon data</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md6"></a>
Adding a Background</h1>
<p>In those cases where the user is also interested in generating background events, he/she can initialize a new instance of the <code><a class="el" href="class_eco_mug.html" title="Class for the generation of cosmic muons.">EcoMug</a></code> class with a custom definition of the <em>J</em> to describe the background. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
